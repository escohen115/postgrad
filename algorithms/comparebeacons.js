
// temp = {"events":"Page Load Started","arr":[1,2,3],"page":{"contenttype":"","title":"Red Hat - We make open source technologies for the enterprise","siteLanguage":"en","cms":"RH CMS 2022.13.0","contentFindingMethod":"","contentID":"5","contentPortal":"","destinationURL":"https://www.redhat.com/en/home-page","errorMessage":"","errorType":"","language":"en","pageName":"","referringDomain":"","referringURL":"","sysEnv":"desktop","template":"","title":"Red Hat - We make open source technologies for the enterprise","queryParameters":"","referringSearchEngine":"","analyticsTitle":"home page","taxonomyRegion":["4521"],"taxonomyMetaHreflang":["29051"],"gated":false,"keyPage":"false","keyPageType":"","pageType":"page","primaryCategory":"home page","subCategories":[],"pageCategory":"","subsection":"","subsection2":"","subsection3":"","pageSubType":"","siteExperience":"desktop"},"__meta":{"callbackSnapshots":[],"validationResult":{"active":true,"errors":[{"message":"Missing required property: siteName","params":{"key":"siteName"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/8","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"},{"message":"Missing required property: taxonomyBlogPostCategory","params":{"key":"taxonomyBlogPostCategory"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/11","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"},{"message":"Missing required property: taxonomyTopic","params":{"key":"taxonomyTopic"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/15","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"}],"valid":false,"validated":true,"schemaProvider":"DLM settings"}}}
// temp = {"event":"Page Load pooped","arr":[1,2,4],"page":{"contentType":"","title":"Red Hat - We make open source technologies for the enterprise","siteLanguage":"en","cms":"RH CMS 2022.13.0","contentFindingMethod":"","contentID":"5","contentPortal":"","destinationURL":"https://www.redhat.com/en/home-page","errorMessage":"","errorType":"","language":"en","pageName":"","referringDomain":"","referringURL":"","sysEnv":"desktop","template":"","title":"Red Hat - We make open source technologies for the enterprise","queryParameters":"","referringSearchEngine":"","analyticsTitle":"home page","taxonomyRegion":["4521"],"taxonomyMetaHreflang":["29051"],"gated":true,"keyPage":"false","keyPageType":"","pageType":"page","primaryCategory":"home page","subCategories":[],"pageCategory":"","subsection":"","subsection2":"","subsection3":"","pageSubType":"","siteExperience":"desktop"},"__meta":{"callbackSnapshots":[],"validationResult":{"active":true,"errors":[{"message":"Missing required property: siteName","params":{"key":"siteName"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/8","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"},{"message":"Missing required property: taxonomyBlogPostCategory","params":{"key":"taxonomyBlogPostCategory"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/11","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"},{"message":"Missing required property: taxonomyTopic","params":{"key":"taxonomyTopic"},"code":302,"dataPath":"/page","schemaPath":"/properties/page/required/15","subErrors":null,"stack":"Error\\n    at new d (https://www.redhat.com/dtm.js:12:1138)\\n    at g.createError (https://www.redhat.com/dtm.js:12:5069)\\n    at g.validateObjectRequiredProperties (https://www.redhat.com/dtm.js:12:16180)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15391)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at g.validateObjectProperties (https://www.redhat.com/dtm.js:12:16490)\\n    at g.validateObject (https://www.redhat.com/dtm.js:12:15437)\\n    at g.validateAll (https://www.redhat.com/dtm.js:12:9109)\\n    at Object.validateMultiple (https://www.redhat.com/dtm.js:12:2579)\\n    at https://www.redhat.com/dtm.js:11:26529"}],"valid":false,"validated":true,"schemaProvider":"DLM settings"}}}

// temp1 = {"a":1,"b":2}
// temp2 = {"b":2}


// function compare(e1,e2){
//     let valuesDifferences = []

//     let e1k = Object.keys(e1)
//     let e1t = {}
//     e1k.forEach(key => e1t[key] = typeof(e1[key]))
//     e1k.sort()

//     let e2k = Object.keys(e2)
//     let e2t = {}
//     e2k.forEach(key => e2t[key] = typeof(e2[key]))
//     e2k.sort()

//     //key differences
//     let uniqueKeys={e1_uniquekeys:[],e2_uniquekeys:[]}

//     e2k.forEach(key => {
//         if (!e1k.includes(key)){
//             uniqueKeys.e1_uniquekeys.push(key)
//         }
//     })
//     e1k.forEach(key => {
//         if (!e2k.includes(key)){
//             uniqueKeys.e2_uniquekeys.push(key)
//         }
//     })
    
//     valuesDifferences.push(uniqueKeys)
    
//     //value differences
//     let i = 0
//     let j = 0
//     while (i < e1k.length && j < e2k.length){

//         if (typeof(e1[e1k[i]]) !== "object" && typeof(e2[e2k[j]]) !== "object" ) { // not an object (and is t/f a string or number)
//             if(e1[e1k[i]] !== e2[e1k[i]]){ 
//                 valuesDifferences.push(`e1.${e1k[i]}: ${e1[e1k[i]]}, e2.${e2k[j]}: ${e2[e2k[j]]};`)
//             }
//         }
//         else if (e1[e1k[i]].length === undefined && e2[e2k[j]].length === undefined && typeof(e1[e1k[i]]) == "object" && typeof(e2[e2k[j]]) == "object" ){ //object
//             valuesDifferences.push(...compare(e1[e1k[i]], e2[e2k[j]]))
//         }

//         else if (e1[e1k[i]].length !== undefined && e2[e2k[j]].length !== undefined){ // if an array, find the highest level differences
//             let k = 0
//             let l = 0

//             while (k < e1[e1k[i]].length && l < e2[e2k[j]].length){
                
//                 if (e1[e1k[i]][k] !== e2[e2k[j]][l]){
//                     console.log(122)
//                     valuesDifferences.push(`e1[${k}]:${e1[e1k[i]][k]}, e2[${l}]:${e1[e1k[i]][k]}`)
//                 }
//                 k++
//                 l++
//             }
//             while (k < e1[e1k[i]].length){
//                 valuesDifferences.push(`e1[${k}]:${e1[k]}, e2[${l}]: not found`)
//                 k++
//             }
//             while (l < e2[e2k[j]].length){
//                 valuesDifferences.push(`e2[${l}]:${e2[l]}, e1[${k}]: not found, `)
//                 l++
//             }
//         }
//         i++
//         j++
//     }
//     while (i < e1k.length){
//         valuesDifferences.push(`e1.${e1k[i]}: ${e1[e1k[i]]}, e2: not found;`)
//         i++
//     }
//     while (i < e2k.length){
//         valuesDifferences.push(`e2.${e2k[j]}: ${e2[e2k[j]]}, e1: not found;`)
//         j++
//     }
//     return valuesDifferences
// }


// console.log(compare(temp1,temp2))



//find highest level key differences
//find highest level value differences


function highestLevelFunction(obj1, obj2){
    //call object comparison
    //object comparison can call itself or array comparison
    //array comparison can call itself or object comparison
    let final = {
        arrayDifferences: {},
        objectDifferences: {}
    }


}


function objectCompare (obj1,obj2){

    let keyDiffs = {obj1_uniqueKeys:[], obj2_uniqueKeys: []}
    let valueDiffs = {obj1_uniqueValues: [], obj2_uniqueValues:[]}
    let typeDiffs = {obj1_uniqueTypes: [], obj2_uniqueTypes: []}

    Object.keys(obj1).forEach(key=>{ //within the first object that we pass in as an argument, we need to check if there's another nested object or array
       
        if(!obj2[key]){ // if the key is missing in the other object
            keyDiffs.obj1_uniqueKeys.push(key)
        }
        else{ // if the key is present in both objects, ensure the values are the same
            if (typeof(obj1[key]) === "object" && obj1[key].length === undefined ){ //object1 is an object
                if (typeof(obj2[key]) !== "object" ){//object2 is not an object
                    let type = typeof(obj2[key])


                    console.log(123)

                    let o1t = {}
                    o1t[key] = "object"
                    typeDiffs.obj1_uniqueTypes.push(JSON.stringify(o1t))

                    let o2t = {}
                    o2t[key] = `${type}`
                    typeDiffs.obj2_uniqueTypes.push(JSON.stringify(o2t))
                    
                } 
            }
            // else if (typeof(obj1[key]) === "object" && obj1[key].length !== undefined) { // object1 is an array

            // }

            else if (obj1[key] !== obj2[key]){ //same value type, not an array or object, but value difference 
                let obj1ukvr = {}
                let obj2ukvr = {}
                obj1ukvr[key] = obj1[key]
                obj2ukvr[key] = obj2[key]
                valueDiffs.obj1_uniqueValues.push(JSON.stringify(obj1ukvr))
                valueDiffs.obj2_uniqueValues.push(JSON.stringify(obj2ukvr))
            }
        }   
    })

    Object.keys(obj2).forEach(key=>{
        if(!obj1[key]){
            keyDiffs.obj2_uniqueKeys.push(key)
        }
    })
    let objectDiffs = {keyDiffs, valueDiffs, typeDiffs}
    return objectDiffs
}


let frog = {height: 34, color:"lime green", size:"small", dimensions:{weight:23}}
let toad = {jump: 12, color:"green", weight:"small", dimensions:23}



console.log(objectCompare(frog,toad))



function arrayCompare(arr1,arr2){
    let diffs = {arr1_unique_values:[],arr2_unique_values:[]}

    arr1.forEach(elem => {
        if(!arr2.includes(elem)) {
            if(elem.length == undefined && typeof(elem) === "object"){
                //object comparison
            }
            else{
                diffs.arr1_unique_values.push(elem)
            }            
        }
    })
    arr2.forEach(elem => {
        if(!arr1.includes(elem)) {
            if(elem.length == undefined && typeof(elem) === "object"){
                //object comparison
            }
            else{
                diffs.arr2_unique_values.push(elem)
            }
        }
    })
    return diffs
}


let a = [1,2,3,"a", {a:"h"}]
let b = [1,2,3,"a", {a:"h"}]
// console.log(arrayCompare(a,b))
